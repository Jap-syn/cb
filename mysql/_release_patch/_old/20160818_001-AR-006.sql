-- 与信審査結果テーブルにカラム追加(開発環境で167秒)
ALTER TABLE `T_CjResult` 
ADD COLUMN `AggregationLevel0Cnt` INT NULL AFTER `TotalScoreWeighting`,
ADD COLUMN `AggregationLevel1Cnt` INT NULL AFTER `AggregationLevel0Cnt`;


-- 与信結果ログテーブルを新規追加
CREATE TABLE `T_CreditLog` (
  `Seq` bigint(20) NOT NULL AUTO_INCREMENT,
  `StartTime` datetime DEFAULT NULL,
  `EndTime` datetime DEFAULT NULL,
  `OrderSeq` bigint(20) DEFAULT NULL,
  `OrderId` varchar(50) DEFAULT NULL,
  `CjrSeq` bigint(20) DEFAULT NULL,
  `JtcSeq` bigint(20) DEFAULT NULL,
  `CotSeq` bigint(20) DEFAULT NULL,
  `Oem_CreditCriterion` int(11) DEFAULT NULL,
  `Oem_AutoCreditDateFrom` date DEFAULT NULL,
  `Oem_AutoCreditDateTo` date DEFAULT NULL,
  `Ent_JintecFlg` tinyint(4) DEFAULT NULL,
  `Ent_AutoJudgeFlg` tinyint(4) DEFAULT NULL,
  `Ent_ManualJudgeFlg` tinyint(4) DEFAULT NULL,
  `Ent_CreditThreadNo` tinyint(4) DEFAULT NULL,
  `Ent_UseAmountLimitForCreditJudge` bigint(20) DEFAULT NULL,
  `Ent_AutoCreditJudgeMode` tinyint(4) DEFAULT NULL,
  `Ent_JudgeSystemFlg` tinyint(4) DEFAULT NULL,
  `Ent_CreditJudgePendingRequest` tinyint(4) DEFAULT NULL,
  `Sit_T_OrderClass` tinyint(4) DEFAULT NULL,
  `Sit_AutoCreditLimitAmount` int(11) DEFAULT NULL,
  `Sit_CreditOrderUseAmount` int(11) DEFAULT NULL,
  `Sit_AverageUnitPriceRate` float DEFAULT NULL,
  `Sit_AutoCreditDateFrom` date DEFAULT NULL,
  `Sit_AutoCreditDateTo` date DEFAULT NULL,
  `Sit_AutoCreditCriterion` int(11) DEFAULT NULL,
  `Sit_CreditJudgeMethod` tinyint(4) DEFAULT NULL,
  `Sit_MultiOrderScore` int(11) DEFAULT NULL,
  `Sit_MultiOrderCount` int(11) DEFAULT NULL,
  `Sit_SitClass` tinyint(4) DEFAULT NULL,
  `Def_CpId1_Point` int(11) DEFAULT NULL,
  `Def_CpId2_Point` int(11) DEFAULT NULL,
  `Def_CpId105_Point` int(11) DEFAULT NULL,
  `Def_CpId106_Point` int(11) DEFAULT NULL,
  `Def_CpId107_Point` int(11) DEFAULT NULL,
  `Def_CpId108_Point` int(11) DEFAULT NULL,
  `Def_CpId109_Point` int(11) DEFAULT NULL,
  `Def_CpId201_Point` int(11) DEFAULT NULL,
  `Def_CpId202_Point` int(11) DEFAULT NULL,
  `Def_CpId203_Point` int(11) DEFAULT NULL,
  `Def_CpId301_Point` int(11) DEFAULT NULL,
  `Def_CpId301_GeneralProp` int(11) DEFAULT NULL,
  `Def_CpId302_Point` int(11) DEFAULT NULL,
  `Def_CpId302_GeneralProp` int(11) DEFAULT NULL,
  `Def_CpId303_Point` int(11) DEFAULT NULL,
  `Def_CpId303_GeneralProp` int(11) DEFAULT NULL,
  `Def_CpId304_Point` int(11) DEFAULT NULL,
  `Def_CpId304_GeneralProp` int(11) DEFAULT NULL,
  `Def_CpId401_Rate` decimal(16,5) DEFAULT NULL,
  `Def_CpId402_Rate` decimal(16,5) DEFAULT NULL,
  `Def_CpId403_Rate` decimal(16,5) DEFAULT NULL,
  `Def_CoreSystemHoldMIN` int(11) DEFAULT NULL,
  `Def_CoreSystemHoldMAX` int(11) DEFAULT NULL,
  `Def_CpId501_Description` varchar(4000) DEFAULT NULL,
  `Def_JudgeSystemHoldMIN` int(11) DEFAULT NULL,
  `Def_JudgeSystemHoldMAX` int(11) DEFAULT NULL,
  `Org_CpId105_Point` int(11) DEFAULT NULL,
  `Org_CpId106_Point` int(11) DEFAULT NULL,
  `Org_CpId107_Point` int(11) DEFAULT NULL,
  `Org_CpId108_Point` int(11) DEFAULT NULL,
  `Org_CpId109_Point` int(11) DEFAULT NULL,
  `Org_CpId201_Point` int(11) DEFAULT NULL,
  `Org_CpId202_Point` int(11) DEFAULT NULL,
  `Org_CpId203_Point` int(11) DEFAULT NULL,
  `Org_CpId301_Point` int(11) DEFAULT NULL,
  `Org_CpId301_GeneralProp` int(11) DEFAULT NULL,
  `Org_CpId302_Point` int(11) DEFAULT NULL,
  `Org_CpId302_GeneralProp` int(11) DEFAULT NULL,
  `Org_CpId303_Point` int(11) DEFAULT NULL,
  `Org_CpId303_GeneralProp` int(11) DEFAULT NULL,
  `Org_CpId304_Point` int(11) DEFAULT NULL,
  `Org_CpId304_GeneralProp` int(11) DEFAULT NULL,
  `Org_CpId401_Rate` decimal(16,5) DEFAULT NULL,
  `Org_CpId402_Rate` decimal(16,5) DEFAULT NULL,
  `Org_CpId403_Rate` decimal(16,5) DEFAULT NULL,
  `Org_CoreSystemHoldMIN` int(11) DEFAULT NULL,
  `Org_CoreSystemHoldMAX` int(11) DEFAULT NULL,
  `Org_CpId501_Description` varchar(4000) DEFAULT NULL,
  `Org_JudgeSystemHoldMIN` int(11) DEFAULT NULL,
  `Org_JudgeSystemHoldMAX` int(11) DEFAULT NULL,
  `Sys_enterpriseid` varchar(100) DEFAULT NULL,
  `Sys_AutoCreditDateFrom` varchar(100) DEFAULT NULL,
  `Sys_AutoCreditDateTo` varchar(100) DEFAULT NULL,
  `Sys_AutoCreditLimitAmount` varchar(100) DEFAULT NULL,
  `Sys_BtoBCreditLimitAmount` varchar(100) DEFAULT NULL,
  `Sys_CreditCriterion` varchar(100) DEFAULT NULL,
  `Sys_CreditOrderUseAmount` varchar(100) DEFAULT NULL,
  `Sys_MultiOrderDays` varchar(100) DEFAULT NULL,
  `Sys_default_average_unit_price_rate` varchar(100) DEFAULT NULL,
  `Jud_judgeTOrderClass` tinyint(4) DEFAULT NULL,
  `Jud_MultiOrderScore` int(11) DEFAULT NULL,
  `Jud_MultiOrderYN` tinyint(4) DEFAULT NULL,
  `Jud_Cust_IncreArName` int(11) DEFAULT NULL,
  `Jud_Cust_IncreArAddr` int(11) DEFAULT NULL,
  `Jud_Cust_IncreArTel` int(11) DEFAULT NULL,
  `Jud_Deli_IncreArName` int(11) DEFAULT NULL,
  `Jud_Deli_IncreArAddr` int(11) DEFAULT NULL,
  `Jud_Deli_IncreArTel` int(11) DEFAULT NULL,
  `Jud_CreditCriterion` int(11) DEFAULT NULL,
  `Jud_AutoUseAmountOverYN` tinyint(4) DEFAULT NULL,
  `Jud_SaikenCancelScore` int(11) DEFAULT NULL,
  `Jud_SaikenCancelYN` tinyint(4) DEFAULT NULL,
  `Jud_NonPaymentCntScore` int(11) DEFAULT NULL,
  `Jud_NonPaymentCntYN` tinyint(4) DEFAULT NULL,
  `Jud_NonPaymentAmtScore` int(11) DEFAULT NULL,
  `Jud_UnpaidCntScore` int(11) DEFAULT NULL,
  `Jud_UnpaidCntYN` tinyint(4) DEFAULT NULL,
  `Jud_UnpaidAmtScore` int(11) DEFAULT NULL,
  `Jud_PastOrdersScore` int(11) DEFAULT NULL,
  `Jud_EntNoteScore` int(11) DEFAULT NULL,
  `Jud_IdentityDocumentFlgScore` int(11) DEFAULT NULL,
  `Jud_MischiefCancelScore` int(11) DEFAULT NULL,
  `Jud_CustomerScore` int(11) DEFAULT NULL,
  `Jud_CustomerSeqs` varchar(255) DEFAULT NULL,
  `Jud_OrderItemsScore` int(11) DEFAULT NULL,
  `Jud_OrderItemsSeqs` varchar(255) DEFAULT NULL,
  `Jud_DeliveryDestinationScore` int(11) DEFAULT NULL,
  `Jud_DeliveryDestinationSeqs` varchar(255) DEFAULT NULL,
  `Jud_EnterpriseScore` int(11) DEFAULT NULL,
  `Jud_EnterpriseSeqs` varchar(255) DEFAULT NULL,
  `Jud_UseAmountScore` int(11) DEFAULT NULL,
  `Jud_UseAmountOverYN` tinyint(4) DEFAULT NULL,
  `Jud_CoreStatus` tinyint(4) DEFAULT 0,
  `Jud_IluStatus` tinyint(4) DEFAULT 0,
  `Jud_JintecStatus` tinyint(4) DEFAULT 0,
  `Jud_ManualStatus` tinyint(4) DEFAULT 0,
  PRIMARY KEY (`Seq`),
  KEY `Idx_T_CreditLog01` (`OrderSeq`),
  KEY `Idx_T_CreditLog02` (`OrderId`),
  KEY `Idx_T_CreditLog03` (`StartTime`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

